<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:form="http://www.thymeleaf.org"
      xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <title>Exchange Rates</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style>
        table, th, td {
            border: 1px solid black;
        }
    </style>
</head>

<body>

<select th:field="*{banks}">
    <option th:each="bank : ${banks}" th:value="${bank}" th:text="${bank}">
    </option>
</select>

<table>
    <tr>
        <td>&nbsp;</td>
        <td id="bank-type" style="font-weight:bold"></td>
    </tr>
    <tr th:each="currency : ${currencies}">
        <td th:text="${currency}"></td>
        <td th:id="${currency}" class="currency-cell"></td>
    </tr>
</table>

</body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script>
    $('select').prop("selectedIndex", -1);
    $(document).ready(function () {
        $('select').on('change', function () {
            var bankName = this.value;
            $.ajax({
                type: "GET",
                contentType: "application/json",
                url: "/bank-data/" + bankName,
                dataType: 'json',
                success: function (data) {
                    $("#bank-type").html(bankName + "/" + data.bankType.currency);
                    $('.currency-cell[id]').each(function () {
                        $(this).html(data.rates[this.id]);
                    })
                }
            });
        });
    });
</script>
</html>